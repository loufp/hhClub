{
  "analysis": {
    "language": "Go",
    "framework": "Go",
    "hasDockerfile": true,
    "buildCommands": [
      "go build ./...",
      "go test ./..."
    ]
  },
  "gitLabCI": "image: golang:1.21\n\nstages:\n  - build\n  - test\n  - package\n  - deploy\n\nbuild_job:\n  stage: build\n  script:\n    - go build ./...\n    - go test ./...\n\ntest_job:\n  stage: test\n  script:\n    - echo 'Running tests...'\n    - go test ./...\n\npackage_job:\n  stage: package\n  script:\n    - docker build -t myapp:latest .\n    - echo 'Docker image built successfully'\n\ndeploy_job:\n  stage: deploy\n  script:\n    - echo 'Deploy: tagging and pushing image to registry (requires CI_REGISTRY and credentials)'\n    - if [ -n \"$CI_REGISTRY\" ] && [ -n \"$CI_REGISTRY_IMAGE\" ]; then docker tag myapp:latest $CI_REGISTRY_IMAGE:latest && docker push $CI_REGISTRY_IMAGE:latest; else echo 'CI registry variables not set, skipping push'; fi\n    - if [ -n \"$KUBE_CONFIG_BASE64\" ]; then echo $KUBE_CONFIG_BASE64 | base64 -d > kubeconfig && KUBECONFIG=kubeconfig kubectl apply -f k8s/ || echo 'no k8s manifests or KUBE_CONFIG_BASE64 not set'; fi\n\n",
  "jenkinsfile": "pipeline {\n    agent {\n        docker { image 'golang:1.21' }\n    }\n\n    stages {\n        stage('Build') {\n            steps {\n                sh 'go build ./...'\n                sh 'go test ./...'\n            }\n        }\n\n        stage('Test') {\n            steps {\n                sh 'go test ./...'\n            }\n        }\n\n        stage('Package') {\n            steps {\n                sh 'docker build -t myapp:latest .' \n                echo 'Docker image built successfully'\n            }\n        }\n\n        stage('Deploy') {\n            steps {\n                sh \"if [ -n '$DOCKER_REGISTRY' ]; then docker tag myapp:latest $DOCKER_REGISTRY/myapp:latest && docker push $DOCKER_REGISTRY/myapp:latest; else echo 'DOCKER_REGISTRY not set, skipping push'; fi\"\n                sh \"if [ -n '$KUBE_CONFIG_BASE64' ]; then echo $KUBE_CONFIG_BASE64 | base64 -d > kubeconfig && KUBECONFIG=kubeconfig kubectl apply -f k8s/; else echo 'KUBE_CONFIG_BASE64 not set, skipping k8s apply'; fi\"\n            }\n        }\n\n    }\n}\n",
  "execution": null
}

